<template>
    <div style="width: 100%; height:100%;">
        <!-- 添加新建和上传等按钮 -->
        <div style="width: 100%; height:10%; background-color:blanchedalmond"></div>

        <!-- 显示文件 -->
        <div style="width: 100%; height:80%;  margin-top: 10px;">
            <!-- 内容 -->
            <el-row :gutter="20">
                <el-col :span="8" v-for="colTtem in  colItems " :key="colTtem.id">
                    <button class="file-btn" v-on:dblclick="">
                        <!-- 目录 -->
                        <svg v-if="colTtem.folderType === '1'" t="1691739427959" class="dir" viewBox="0 0 1024 1024"
                            version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18064" width="30" height="30">
                            <path
                                d="M855.04 385.024q19.456 2.048 38.912 10.24t33.792 23.04 21.504 37.376 2.048 54.272q-2.048 8.192-8.192 40.448t-14.336 74.24-18.432 86.528-19.456 76.288q-5.12 18.432-14.848 37.888t-25.088 35.328-36.864 26.112-51.2 10.24l-567.296 0q-21.504 0-44.544-9.216t-42.496-26.112-31.744-40.96-12.288-53.76l0-439.296q0-62.464 33.792-97.792t95.232-35.328l503.808 0q22.528 0 46.592 8.704t43.52 24.064 31.744 35.84 12.288 44.032l0 11.264-53.248 0q-40.96 0-95.744-0.512t-116.736-0.512-115.712-0.512-92.672-0.512l-47.104 0q-26.624 0-41.472 16.896t-23.04 44.544q-8.192 29.696-18.432 62.976t-18.432 61.952q-10.24 33.792-20.48 65.536-2.048 8.192-2.048 13.312 0 17.408 11.776 29.184t29.184 11.776q31.744 0 43.008-39.936l54.272-198.656q133.12 1.024 243.712 1.024l286.72 0z"
                                p-id="18065" fill="#8a8a8a"></path>
                        </svg>
                        <!-- 视频-->
                        <svg v-if="colTtem.fileCategory === '0'" t="1691912832519" class="dir" viewBox="0 0 1024 1024"
                            version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6168" width="30" height="30">
                            <path
                                d="M960.43008 332.778496l-133.021696 45.024256L827.408384 260.871168c0-23.40352-18.967552-42.376192-42.372096-42.376192l-114.55488 0L253.991936 218.494976 73.79968 218.494976c-23.40352 0-42.376192 18.971648-42.376192 42.376192l0 349.394944 0 132.69504-0.556032 24.56064c0 23.399424 18.971648 42.376192 42.376192 42.376192L555.39712 809.897984l229.640192 0c23.40352 0 42.372096-18.975744 42.372096-42.376192l0-14.076928 0-66.9952 133.021696 45.02016c23.40352 0 42.376192-18.971648 42.376192-42.372096L1002.807296 375.154688C1002.805248 351.751168 983.8336 332.778496 960.43008 332.778496zM563.525632 531.45088 403.787776 651.986944c-3.692544 2.772992-8.1408 4.202496-12.58496 4.202496-3.182592 0-6.366208-0.735232-9.32352-2.2016-7.07584-3.509248-11.561984-10.77248-11.561984-18.683904L370.317312 401.570816c0-7.790592 4.365312-14.97088 11.298816-18.558976 6.892544-3.550208 15.276032-2.977792 21.6576 1.508352L563.01568 497.717248c5.44256 3.871744 8.70912 10.075136 8.809472 16.720896C571.925504 521.12896 568.84736 527.4112 563.525632 531.45088z"
                                fill="#FF9000" p-id="6169"></path>
                        </svg>
                        <!-- 音频 -->
                        <svg v-if="colTtem.fileCategory === '1'" t="1691912905596" class="dir" viewBox="0 0 1024 1024"
                            version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1535" width="30" height="30">
                            <path
                                d="M481 511.4c49.4 0 89.5 32.1 89.5 71.6 0 39.5-40.2 71.6-89.5 71.6s-89.5-32.1-89.5-71.6c0-39.5 40.1-71.6 89.5-71.6m0-35.8c-69.2 0-125.3 48.1-125.3 107.4 0 59.3 56.1 107.4 125.3 107.4s125.3-48 125.3-107.4c0-59.3-56.1-107.4-125.3-107.4zM217.4 442.8c-0.8 0-1.5-0.1-2.3-0.3-4.8-1.2-7.6-6.1-6.4-10.9 1.4-5.2 2.9-10.3 4.5-15.4 1.5-4.7 6.5-7.3 11.2-5.8 4.7 1.5 7.3 6.5 5.8 11.2-1.5 4.8-2.9 9.6-4.2 14.5-1 4-4.6 6.7-8.6 6.7z m17.8-49.7c-1.3 0-2.5-0.3-3.7-0.8-4.5-2.1-6.5-7.4-4.4-11.9 30.4-65.9 83.1-119.6 148.5-151.2 4.5-2.2 9.8-0.3 12 4.2 2.2 4.5 0.3 9.8-4.2 12-61.6 29.8-111.4 80.5-140 142.6a9.16 9.16 0 0 1-8.2 5.1z"
                                fill="#FF7878" p-id="1536"></path>
                            <path
                                d="M511.8 959C265 959 64.2 758.2 64.2 511.4c0-232.7 174.5-424.3 406-445.7 13.7-1.3 27.7-1.9 41.6-1.9 9.9 0 17.9 8 17.9 17.9s-8 17.9-17.9 17.9c-12.8 0-25.7 0.6-38.3 1.7C260.6 121.1 100 297.3 100 511.4c0 227 184.7 411.8 411.8 411.8s411.8-184.7 411.8-411.8c0-63.6-14.1-124.5-41.9-181.2-8.9-18.2-19.3-35.9-30.9-52.6-5.6-8.1-3.6-19.3 4.6-24.9 8.1-5.6 19.3-3.6 24.9 4.6 12.5 18.1 23.8 37.4 33.5 57.2 30.2 61.6 45.6 127.9 45.6 196.9C959.3 758.2 758.6 959 511.8 959z m76.7-358.1c-9.9 0-17.9-8-17.9-17.9V128.4c0-27.9 14.6-47.9 38.1-52.2 0.3-0.1 6.8-1.5 13.1 0.1v-0.1c54.3 13 103.4 36.6 154.6 74.2 15.6 11.5 30.7 24.2 44.9 37.7 7.1 6.8 7.4 18.2 0.6 25.3s-18.2 7.4-25.3 0.6c-13-12.4-26.9-24.1-41.3-34.7-46.5-34.2-91-55.7-139.7-67.7h-1.1c-5.6 1.8-8.1 7.4-8.1 16.8V583c0 9.9-8.1 17.9-17.9 17.9z"
                                fill="#FF7878" p-id="1537"></path>
                        </svg>
                        <!-- 图片 -->
                        <img style="width:15%; height: 80%; margin-left: 10px;" v-if="colTtem.fileCategory === '2'"
                            :src="url + 'image/' + colTtem.filePath">

                        <!-- word文档 -->
                        <svg v-if="colTtem.fileCategory === '4'" t="1691912642147" class="dir" viewBox="0 0 1024 1024"
                            version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4240" width="30" height="30">
                            <path
                                d="M791.94 155.36H332.48c-42.23 0-76.54 34.31-76.54 76.54v76.55h-51.03c-28.16 0-51.04 22.87-51.04 51.03v306.37c0 28.15 22.88 51.02 51.04 51.02h51.03v76.54c0 42.24 34.32 76.55 76.54 76.55h459.46c42.23 0 76.54-34.32 76.54-76.54V231.9c0.1-42.24-34.31-76.54-76.54-76.54z m-547.68 298.6h40.28l26.04 93.58h5.7l29.16-93.58h34.45l29.02 93.71h6.24l26.18-93.71h40.41l-40.41 133.72H384.1l-19.53-70.25h-5.43l-19.26 69.98h-55.74l-39.88-133.45zM817.45 793.5c-0.01 14.09-11.42 25.5-25.51 25.51H332.48c-14.09-0.01-25.5-11.43-25.51-25.51v-76.54h204.21c28.15 0 51.03-22.88 51.03-51.03V614.9H740.9c14.09-0.01 25.51-11.43 25.52-25.52-0.02-14.09-11.43-25.5-25.52-25.51H562.21v-51.03H740.9c14.09-0.01 25.51-11.43 25.52-25.52-0.01-14.09-11.43-25.5-25.52-25.52H562.21v-51.03H740.9c14.09-0.01 25.51-11.43 25.52-25.51-0.01-14.09-11.43-25.51-25.52-25.52H562.21c0-28.16-22.89-51.03-51.03-51.03H306.97v-76.54c0.01-14.09 11.43-25.5 25.51-25.52h459.46c14.08 0.01 25.5 11.43 25.51 25.52V793.5z m0 0"
                                fill="#54A0FF" p-id="4241"></path>
                        </svg>
                        <!-- excel -->
                        <svg v-if="colTtem.fileCategory === '5'" t="1691918205035" class="dir" viewBox="0 0 1024 1024"
                            version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4973" width="30" height="30">
                            <path
                                d="M145.6 0C100.8 0 64 36.8 64 81.6v860.8C64 987.2 100.8 1024 145.6 1024h732.8c44.8 0 81.6-36.8 81.6-81.6V324.8L657.6 0h-512z"
                                fill="#45B058" p-id="4974"></path>
                            <path
                                d="M374.4 862.4c-3.2 0-6.4-1.6-8-3.2l-59.2-80-60.8 80c-1.6 1.6-4.8 3.2-8 3.2-6.4 0-11.2-4.8-11.2-11.2 0-1.6 0-4.8 1.6-6.4l62.4-81.6-57.6-78.4c-1.6-1.6-3.2-3.2-3.2-6.4 0-4.8 4.8-11.2 11.2-11.2 4.8 0 8 1.6 9.6 4.8l56 73.6 54.4-73.6c1.6-3.2 4.8-4.8 8-4.8 6.4 0 12.8 4.8 12.8 11.2 0 3.2-1.6 4.8-1.6 6.4l-59.2 76.8 62.4 83.2c1.6 1.6 3.2 4.8 3.2 6.4 0 6.4-6.4 11.2-12.8 11.2z m160-1.6H448c-9.6 0-17.6-8-17.6-17.6V678.4c0-6.4 4.8-11.2 12.8-11.2 6.4 0 11.2 4.8 11.2 11.2v161.6h80c6.4 0 11.2 4.8 11.2 9.6 0 6.4-4.8 11.2-11.2 11.2z m112 3.2c-28.8 0-51.2-9.6-67.2-24-3.2-1.6-3.2-4.8-3.2-8 0-6.4 3.2-12.8 11.2-12.8 1.6 0 4.8 1.6 6.4 3.2 12.8 11.2 32 20.8 54.4 20.8 33.6 0 44.8-19.2 44.8-33.6 0-49.6-113.6-22.4-113.6-89.6 0-32 27.2-54.4 65.6-54.4 24 0 46.4 8 60.8 20.8 3.2 1.6 4.8 4.8 4.8 8 0 6.4-4.8 12.8-11.2 12.8-1.6 0-4.8-1.6-6.4-3.2-14.4-11.2-32-16-49.6-16-24 0-40 11.2-40 30.4 0 43.2 113.6 17.6 113.6 89.6 0 27.2-19.2 56-70.4 56z"
                                fill="#FFFFFF" p-id="4975"></path>
                            <path d="M960 326.4v16H755.2s-102.4-20.8-99.2-108.8c0 0 3.2 92.8 96 92.8h208z" fill="#349C42"
                                p-id="4976"></path>
                            <path d="M656 0v233.6c0 25.6 19.2 92.8 99.2 92.8H960L656 0z" fill="#FFFFFF" p-id="4977"></path>
                        </svg>
                        <!-- txt -->
                        <svg v-if="colTtem.fileCategory === '6'" t="1691918416144" class="dir" viewBox="0 0 1024 1024"
                            version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6166" width="30" height="30">
                            <path
                                d="M535.94 71.69h57.58v91.4c108.56 0.61 217.22-1.12 325.68 0.51 23.36-2.23 41.64 15.95 39.3 39.3 1.73 189.71-0.41 379.52 1 569.33-1 20.51 2 43.26-9.75 61.44-14.83 10.76-34.12 9.34-51.48 10.16-101.56-0.51-203.11-0.31-304.77-0.31v101.55h-63.15C375.59 916.83 220.5 891 65.63 863.82q-0.15-355.4 0-710.69C222.34 126 379 98.39 535.94 71.69z"
                                fill="#868695" p-id="6167"></path>
                            <path
                                d="M138.52 547.51V444.39h-34.1v-21h91.31v21h-34v103.12zM199 547.51l39.27-64.77-35.58-59.35h27.12l23 39.88 22.57-39.88h26.89l-35.74 60.28 39.27 63.84h-28l-25.4-42.92-25.55 42.92zM343.63 547.51V444.39h-34.1v-21h91.31v21h-34v103.12zM590.14 193.55v302.14h126.94v12.69H590.14v88.86h265.74v38.08H590.14v48.24h265.74v38.08H590.14V813h335.14V193.55z m198.11 250c-4.53 6.7-10.62 17.86-12.12 31.13a8.11 8.11 0 0 1-5.17 6.88l-43.83 15.86-4.93-2.57 20.22-27.09a15.45 15.45 0 0 0 5 0.79c7.84-0.08 14.14-5.95 14.07-13.09s-6.49-12.89-14.33-12.81-14.14 5.94-14.06 13.09a11.89 11.89 0 0 0 1 4.63 8.05 8.05 0 0 1-0.55 8.14l-17.15 23-4.09-3.82-0.13-42.48a8.25 8.25 0 0 1 4.66-7.51c6.93-3.32 20.19-10.74 30.28-22.81a8.22 8.22 0 0 1 10.81-1.46l28 18.43a8.35 8.35 0 0 1 2.32 11.72z m19.94-14.67a8.35 8.35 0 0 1-11 2l-42.74-26.63a8.35 8.35 0 0 1-2.52-11.73l0.32-0.47c2.53-3.77 4.47-1.64 8.3 0.8L802.93 420c4.13 2.61 8.25 5 5.25 8.91z m36.18-53.69l-24.11 35.7a13 13 0 0 1-18 3.48l-28.55-19.27a13 13 0 0 1-3.48-18l24.11-35.69a12.94 12.94 0 0 1 18-3.48l28.56 19.29a13 13 0 0 1 3.46 18z"
                                fill="#FFFFFF" p-id="6168"></path>
                        </svg>
                        <!-- code -->
                        <svg v-if="colTtem.fileCategory === '7'" t="1691918486942" class="dir" viewBox="0 0 1024 1024"
                            version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9180" width="30" height="30">
                            <path
                                d="M981.333333 276.053333V981.333333a42.666667 42.666667 0 0 1-42.666666 42.666667H85.333333a42.666667 42.666667 0 0 1-42.666666-42.666667V42.666667a42.666667 42.666667 0 0 1 42.666666-42.666667h619.946667z"
                                fill="#B9C9D5" p-id="9181"></path>
                            <path
                                d="M705.28 233.386667V0L981.333333 276.053333H747.946667a42.666667 42.666667 0 0 1-42.666667-42.666666z"
                                fill="#D6E4F0" p-id="9182"></path>
                            <path
                                d="M357.153827 828.153509m-18.856181-18.856181l-143.306974-143.306974q-18.856181-18.856181 0-37.712362l0 0q18.856181-18.856181 37.712361 0l143.306975 143.306975q18.856181 18.856181 0 37.712361l0 0q-18.856181 18.856181-37.712362 0Z"
                                fill="#FFFFFF" p-id="9183"></path>
                            <path
                                d="M176.168321 647.240833m18.856181-18.85618l143.306974-143.306975q18.856181-18.856181 37.712362 0l0 0q18.856181 18.856181 0 37.712362l-143.306974 143.306974q-18.856181 18.856181-37.712362 0l0 0q-18.856181-18.856181 0-37.712361Z"
                                fill="#FFFFFF" p-id="9184"></path>
                            <path
                                d="M666.875271 466.282909m18.856181 18.856181l143.306974 143.306974q18.856181 18.856181 0 37.712362l0 0q-18.856181 18.856181-37.712362 0l-143.306974-143.306974q-18.856181-18.856181 0-37.712362l0 0q18.856181-18.856181 37.712362 0Z"
                                fill="#FFFFFF" p-id="9185"></path>
                            <path
                                d="M847.807757 647.200761m-18.85618 18.856181l-143.306975 143.306974q-18.856181 18.856181-37.712361 0l0 0q-18.856181-18.856181 0-37.712361l143.306974-143.306975q18.856181-18.856181 37.712362 0l0 0q18.856181 18.856181 0 37.712362Z"
                                fill="#FFFFFF" p-id="9186"></path>
                            <path
                                d="M441.216861 805.202833m6.901841-25.758022l74.539885-278.186638q6.901841-25.758022 32.659863-18.856181l0 0q25.758022 6.901841 18.856181 32.659864l-74.539885 278.186638q-6.901841 25.758022-32.659863 18.85618l0 0q-25.758022-6.901841-18.856181-32.659863Z"
                                fill="#FFFFFF" p-id="9187"></path>
                        </svg>
                        <!-- 压缩包 -->
                        <svg v-if="colTtem.fileCategory === '8'" t="1691918715092" class="dir" viewBox="0 0 1024 1024"
                            version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10526" width="30" height="30">
                            <path d="M97.9 376h828.4v269.2H97.9z" fill="#F95F5D" p-id="10527"></path>
                            <path
                                d="M926.3 376V161.5c0-26.6-23.8-50.3-52.1-50.3H149.9c-28.3 0-52.1 23.7-52.1 50.3V376h828.5z m0 0"
                                fill="#55C7F7" p-id="10528"></path>
                            <path
                                d="M97.9 645.2v214.5c0 26.6 23.6 50.3 51.7 50.3h725c28.1 0 51.7-23.7 51.7-50.3V645.2H97.9z m0 0"
                                fill="#7ECF3B" p-id="10529"></path>
                            <path d="M421.8 111.2h184.9V910H421.8z" fill="#FDAF42" p-id="10530"></path>
                            <path
                                d="M606.7 457.4v112.4H413V457.4h193.7m31.1-45.9H381.9c-4.4 0-11.8 4.4-11.8 11.8v179c0 4.4 4.4 11.8 11.8 11.8h255.9c4.4 0 11.8-4.4 11.8-11.8v-179c-2.9-8.8-7.4-11.8-11.8-11.8z m0 0"
                                fill="#FFFFFF" p-id="10531"></path>
                        </svg>
                        <!-- 文件 -->
                        <div class="dir-content">
                            {{ colTtem.fileName }}
                        </div>

                        <!-- todo:弹窗 -->
                        <el-popover popper-class="operation-dialog" :visible-arrow="false" placement="bottom" width="150"
                            trigger="click">
                            <!-- 下载 -->
                            <div class="download-btn">

                            </div>
                            <!-- 重命名 -->
                            <div class="resetname-btn">

                            </div>

                            <button class="dir-btn" slot="reference">
                                <i class="el-icon-s-operation"></i>
                            </button>
                        </el-popover>
                    </button>
                </el-col>
            </el-row>

        </div>
        <!-- 分页 -->
        <div class="pagination-div" style="height: 10%;">
            <el-pagination hide-on-single-page :current-page="currentPage" :page-size="pageSize" layout="prev, pager, next"
                :total="totalNum" @current-change="getAllFiles">
            </el-pagination>
        </div>
    </div>
</template>

<script>
export default {
    components: {},
    props: {},
    data() {
        return {
            //数组大小=16
            colItems: [],   //存储子文件
            email: '',
            currentDir: '',   //当前目录
            currentPage: 0,
            token: '',
            //分页
            pageSize: 12,
            totalNum: 0,   //总共页数
            // 过渡动画
            show: true,
            url: '',


        };
    },
    // 渲染试图前
    created() {
        this.email = localStorage.getItem('email');  //获取邮箱
        this.token = localStorage.getItem('token');   //获取token
        this.url = this.$global.Url;
        console.log(this.url);
        //初始化当前目录下所有文件
        this.getAllFiles();

    },
    methods: {
        /**
         * 获取所有子文件
         */
        subFiles(currentDir) {
            this.getAllFiles();
        },
        // 跳转到最近使用界面
        /**
         * 获取当前目录下所有文件
         */
        getAllFiles(newPage) {
            if (newPage) {
                this.currentPage = newPage;
            }
            let param = {
                email: this.email,
                currentDir: this.currentDir,
                currentPage: this.currentPage,
                pageSize: this.pageSize
            };
            this.$axios.post('file/allFiles', param, {
                headers: { token: this.toekn }
            }).then(value => {
                // console.log(value.data);
                this.totalNum = value.data.data.totalNum;
                this.colItems = value.data.data.fileList;
                console.log(this.colItems);
            }).catch(() => {
                this.$notify({
                    title: '发生一些错误，请联系管理员!',
                    position: 'top-right',  //显示位置
                    duration: 3000,  // 2秒关闭
                    type: 'error',
                    offset: 80
                });
            });
        },
    },
    // 渲染试图后
    mounted() {

    },
};
</script>


<style lang="scss" scoped>
.pagination-div {
    display: flex;
    align-items: center;
    justify-content: center;

    // 左右箭头
    /deep/ .el-pagination {

        button {
            border: none;
            border-radius: 20px;
        }

        .el-pager {

            // 页数按钮
            li {
                margin-right: 5px;
                margin-left: 5px;
                border: none;
                border-radius: 20px;
                background-color: #edf2fc;
            }

            .active {
                color: black;
                filter: brightness(0.9);
            }

            li:hover {
                filter: brightness(0.9);
            }

            li:not(.active):hover {
                color: black !important;
            }
        }

    }


}

.el-row {
    height: 15%;

    .el-col {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100%;
        margin-top: 30px;
        border-radius: 20px;

        .file-btn {
            font-size: 16px;
            display: flex;
            // 垂直居中
            align-items: center;
            // 水平位置
            justify-content: left;
            border: none;
            width: 90%;
            height: 80%;
            background-color: #f2f6fc;
            border-radius: 15px;

            .dir {
                width: 20%;
            }

            .dir-content {
                display: flex;
                // 垂直居中
                align-items: center;
                height: 100%;
                width: 60%;
                margin-left: 20px;
                // 内容过长
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .operation-dialog {
                background-color: #edf2fc;
                border-radius: 20px;
                height: 150px;

            }

            .dir-btn {
                display: flex;
                // 垂直居中
                align-items: center;
                // 水平位置
                justify-content: center;
                width: 30px;
                height: 32px;
                border-radius: 50px;
                border: none;
                background-color: #f2f6fc;

                .el-icon-s-operation {
                    display: flex;
                    // 垂直居中
                    align-items: center;
                    justify-content: center;
                    width: 100%;
                    height: 40px;
                    border-radius: 50px;
                }

            }

            .dir-btn:hover {
                cursor: pointer;
                background-color: #d3d9e3;
            }

            .dir-btn:active {
                transform: scale(0.95);
            }

        }

        .file-btn:hover {
            filter: brightness(0.95);
        }

        .file-btn:active {
            filter: brightness(0.95);
        }

    }
}
</style>